<%- include('./partials/header.ejs'); %>
<hr>
  <div>
    <!-- <code>app.get('/protectedRoute') @protectedRoute.ejs</code> -->
  </div>
  <div>
  </div>
  <div>
<% room.forEach(function(chat){ %>
<p>Welcome, <strong><%= username %></strong>!<button class=" ms-3 btn btn-outline-dark" value="Logout" onclick="window.location.href='/logout'">Logout</button></p>
<!-- <button class="btn btn-outline-dark" value="Logout" onclick="window.location.href='/logout'">Logout</button> -->
<!-- Chat Rooms -->
<div class="container my-4">

    <div class="text-center col-sm border mb-5">
      <div><h2>"<%= chat.name %>"</h2>[chat room id: <%= chat.room_id %>]</div>
    </div>

 
    <% messages.forEach(function(message){ %>
      
      <div>
        <div class="ms-1"><strong><%= message.username %></strong></div>
      <div class="col-sm-3 border p-2">
        <div><%= message.text %></div>
      </div>
      <div class="col-sm-3 text-end"><small><em><%= message.sent_datetime %></em></small></div>
    </div>
      <br>
        
    <% }); %>
  <hr>
  <form action="/postMessage" method="post">
    <label for="message">Enter your message:</label><br>
    <input type="text" id="message" name="message">
    <button type="submit">Send</button>
  </form>
</div>
<% }); %>
<br>
<br>
<hr>
<%- include('./partials/footer.ejs'); %>
